<html><!-- InstanceBegin template="/Templates/opt_example.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="../tut.js"></SCRIPT>
<script language="JavaScript" src="../nav.js"></script>
<SCRIPT LANGUAGE="JavaScript">
 setPageTitle();
 setCookie();
 
// Drop down menu link- © Dynamic Drive (www.dynamicdrive.com)
// For full source code and 100's more DHTML scripts, visit http://www.dynamicdrive.com
// Credit MUST stay intact for use -->

</SCRIPT>

<!-- InstanceBeginEditable name="extrascript" -->
<SCRIPT LANGUAGE="JavaScript">
</SCRIPT>
<!-- InstanceEndEditable -->

<link rel="stylesheet" href="../tut.css">

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Example</title></head>

<body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" rightmargin="0" bgcolor="#FFFFF0">

<script>writeinformationObjectTopNav1();</script>
      
	  <font color="#003399" size="3" face="Arial, Helvetica, sans-serif"><strong><!-- InstanceBeginEditable name="TopicTitle" -->Avoiding 
      Unnecessary Sorts<!-- InstanceEndEditable --></strong></font> 
      <!-- InstanceBeginEditable name="continued" --><font color="#003399" size="3" face="Arial, Helvetica, sans-serif">(continued)</font><!-- InstanceEndEditable -->
	  
<script>writeinformationObjectTopNav2();</script>

<img src="../navimages/cleardot.gif" width="411" height="1" alt=" "><br>
<p>
<!-- InstanceBeginEditable name="Example Title" -->
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <h2><img src="../navimages/opt_ex.gif" alt="Bar chart icon" width="32" height="32" align="absmiddle">Comparative 
        Example: Using a BY or CLASS Statement to Avoid a Sort</h2></td>
  </tr>
</table>
<!-- InstanceEndEditable --><!-- InstanceBeginEditable name="Introduction" --> 
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <p>Suppose you want to create a summary report that shows the average 
        retail price, cost per unit, and discount for each type of order in the 
        <strong>Retail.Order_fact</strong> data set. Among the techniques you 
        could use are 
      <ol>
        <li><a href="#1">PROC MEANS with a BY Statement, Presorted</a></li>
        <li><a href="#2">PROC MEANS with a CLASS Statement</a></li>
        <li><a href="#3">PROC MEANS with a CLASS Statement, Presorted</a></li>
        <li><a href="#4">PROC SORT and PROC MEANS with a BY Statement</a>.</li>
      </ol>
      <p>The following sample programs show each of these techniques. You can 
        use these samples as models for creating benchmark programs in your own 
        environment. Your results might vary depending on the structure of your 
        data, your operating environment, and the resources that are available at your site. You can also view <a href="#recommendations">general recommendations</a> 
        for using a BY or CLASS statement to avoid a sort. 
      <hr size="1" noshade></td>
  </tr>
</table>
<!-- InstanceEndEditable -->
<p> 
  
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
      <td> <h2><!-- InstanceBeginEditable name="Technique Title" --><a name="techniques"></a>Programming 
        Techniques<!-- InstanceEndEditable --></h2></td>
    </tr>
  </table>
<!-- InstanceBeginEditable name="Techniques" --> 
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF" title="Program 1">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="1"></a><img src="../navimages/opt_1.gif" alt="1." width="20" height="20" align="absmiddle"> 
        PROC MEANS with a BY Statement, Presorted</strong></p>
      <blockquote> 
        <p>The following program creates a report for each value of the BY variable 
          <code>Order_Type</code>. Each report contains the mean value for the 
          variables <code>Total_Retail_Price</code>, <code>CostPrice_Per_Unit</code>, 
          and <code>Discount</code>. The input data is presorted by the value 
          of <code>Order_Type</code>.</p>
      </blockquote>
      <blockquote> 
        <pre><font color="#003399">
    proc means data=retail.orders mean;<br>       by order_type;<br>       var total_retail_price costprice_per_unit discount;<br>       freq quantity;<br>    run;</font><font color="#003399"><br></font></pre>
      </blockquote></td>
  </tr>
</table>
<p><br>
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF" title="Program 2">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="2" id="2"></a><img src="../navimages/opt_2.gif" alt="2." width="20" height="20" align="absmiddle"> 
        PROC MEANS with a CLASS Statement</strong></p>
      <blockquote> 
        <p>The following program uses a CLASS statement to create a single, tabular 
          report that includes the mean value of <code>Total_Retail_Price</code>, 
          <code>CostPrice_Per_Unit</code>, and <code>Discount</code> for each 
          category of <code>Order_Type.</code> </p>
      </blockquote>
      <blockquote> 
        <pre><font color="#003399">     </font><font color="#003399">proc means data=retail.order_fact(keep=order_type<br>           quantity total_retail_price <br>           costprice_per_unit discount) mean;<br>        class order_type;<br>        var total_retail_price costprice_per_unit discount;<br>        freq quantity;<br>     run;</font></pre>
      </blockquote></td>
  </tr>
</table>
<p><br>
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF" title="Program 3">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="3" id="3"></a><img src="../navimages/opt_3.gif" alt="2." width="20" height="20" align="absmiddle"> 
        PROC MEANS with a CLASS Statement, Presorted </strong></p>
      <blockquote> 
        <p>In the following program, the input data set <strong>Retail.Order_fact 
          </strong>is presorted by the value of <code>Order_Type</code>. The PROC 
          MEANS step uses a CLASS statement to create a single, tabular report 
          that includes the mean value of <code>Total_Retail_Price</code>, <code>CostPrice_Per_Unit</code>, 
          and <code>Discount</code> for each category of <code>Order_Type.</code></p>
      </blockquote>
      <blockquote>
<pre><font color="#003399">
    proc means data=retail.orders(keep=order_type<br>           quantity total_retail_price <br>           costprice_per_unit discount) mean;<br>        class order_type;<br>        var total_retail_price costprice_per_unit discount;<br>        freq quantity;<br>    run;</font></pre>
      </blockquote></td>
  </tr>
</table>
<p><br>
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF" title="Program 4">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="4" id="4"></a><img src="../navimages/opt_4.gif" alt="4." width="20" height="20" align="absmiddle"> 
        PROC SORT and PROC MEANS with a BY Statement</strong></p>
      <blockquote> 
        <p>In the following program, the PROC SORT step first sorts the input 
          data set <strong>Retail.Order_fact </strong>by the value of <code>Order_Type</code>. 
          The PROC MEANS step then creates a report for each value of <code>Order_Type</code>. 
          Each report contains the mean value for the variables <code>Total_Retail_Price</code>, 
          <code>CostPrice_Per_Unit</code>, and <code>Discount</code>. </p>
      </blockquote>
      <blockquote> 
        <pre><font color="#003399">     proc sort data=retail.order_fact(keep=order_type<br>          quantity total_retail_price<br>          costprice_per_unit discount) out=retail.orders;<br>          by order_type;<br>     run;</font></pre>
        <pre><font color="#003399">     proc means data=retail.orders mean;<br>        by order_type;<br>        var total_retail_price costprice_per_unit discount;<br>        freq quantity;<br>     run;</font><font color="#003399"></font><font color="#003399"><br></font></pre>
      </blockquote></td>
  </tr>
</table>
<p>&nbsp;<!-- InstanceEndEditable --> 
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr> 
      <td> <hr size="1" noshade> </td>
    </tr>
  </table>
<p>
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <h2><a name="recommendations"></a><script>document.write(generalRecommendationsTitle);</script></h2></td>
  </tr>
</table>
<!-- InstanceBeginEditable name="Recommendations" -->
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr> 
    <td> <ul>
        <li> If you can presort the data, use just a BY statement rather than 
          a CLASS statement or a BY statement with a separate SORT procedure.<br>
          <br>
        </li>
        <li>If you cannot sort the data, use the CLASS statement.<br>
          <br>
        </li>
        <li>Do not presort the data for use with a CLASS statement. Presorting 
          the data does not provide a significant benefit.<br>
        </li>
      </ul>
      </td>
  </tr>
</table>
<!-- InstanceEndEditable -->
<script>writeNav_regular_bottom();</script>
</body>
<!-- InstanceEnd --></html>
