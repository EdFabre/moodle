<html><!-- InstanceBegin template="/Templates/informationObject.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="../tut.js"></SCRIPT>
<script language="JavaScript" src="../nav.js"></script>
<SCRIPT LANGUAGE="JavaScript">
 setPageTitle();
 setCookie();
  
// Drop down menu link- © Dynamic Drive (www.dynamicdrive.com)
// For full source code and 100's more DHTML scripts, visit http://www.dynamicdrive.com
// Credit MUST stay intact for use -->

</SCRIPT>

<!-- InstanceBeginEditable name="extrascript" -->
<SCRIPT LANGUAGE="JavaScript">
</SCRIPT>
<!-- InstanceEndEditable -->

<link rel="stylesheet" href="../tut.css">


<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
</HEAD>

<body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" rightmargin="0" bgcolor="#FFFFF0">
<script>writeinformationObjectTopNav1();</script>
	  
	  <font color="#003399" size="3" face="Arial, Helvetica, sans-serif"><strong><!-- InstanceBeginEditable name="TopicTitle" -->Using 
      SAS DATA Step Views to Conserve Data Storage Space<!-- InstanceEndEditable --></strong></font> <!-- InstanceBeginEditable name="continued" --><font color="#003399" size="3" face="Arial, Helvetica, sans-serif">(continued)</font><!-- InstanceEndEditable -->
	  
<script>writeinformationObjectTopNav2();</script>
<br>
<center>
  <!-- InstanceBeginEditable name="content" --> 
  <table width="85%" border="0" cellpadding="0" cellspacing="0">
    <tr valign="top"> 
      <td>  <h2>Making Multiple Passes Through Data in a Data View</h2>
        <p>Expect a degradation in performance when you use a SAS data view with 
          a procedure that requires multiple passes through the data. When multiple 
          passes are requested, the view must build a cache, which is referred 
          to as a spill file, that contains all generated observations. Then SAS 
          reads the data in the spill file on each of the multiple passes through 
          the data in order to ensure that subsequent passes read the same data 
          that was read by previous passes.</p>

		
        <p>For example, the UNIFORM option of the PRINT statement makes all the 
          columns consistent from page to page by determining the longest value 
          for a particular variable. In order to do this, SAS must make two passes 
          through the data: one pass to find the longest value in the data, and 
          one pass to print the data. If you use the UNIFORM option to print a 
          data view, SAS creates a spill file as it generates observations from 
          the view. Then SAS makes two passes through the observations that are 
          in the spill file.</p>
        <p><br><center>
            <img src="images/m82_24g1.gif" width="311" height="206" alt="A PROC PRINT step that references a data view and uses the UNIFORM option creates a spill file during execution.">
</center>
        <p><br>
       
        <table border="0" cellpadding="2" cellspacing="0">
          <tr> 
            <td valign="top" width="24"><img src="../navimages/note.gif" width="20" height="20" alt="Note"></td>
            <td valign="top">Some statistical procedures pass through the data 
              more than once.</td>
          </tr>
        </table>
        <p><br>
          <h2>Creating Data Views on Unstable Data</h2>
		  
        <P>Avoid creating views on files whose structures often change. The view 
          syntax describes the structure of the raw data; therefore, you need 
          to make changes to the view each time the file changes. </p>
        <P>For example, suppose you create a view that combines the data file 
          <strong>Company.Roster</strong> with the data file <strong>Company.Demog</strong>. 
          <strong>Roster</strong> contains the variables <code>LastName</code> 
          and <code>FirstName</code>, and<strong> Company.Demog</strong> contains 
          the variables <code>LastName</code>, <code>Address</code> and <code>Age</code>, 
          as shown below. </p>
      <P><BR>  <table align="center"><tr><td valign="top"><center>
                <strong>Company.Roster</strong> 
              </center>
		<table border="1" align="center" cellpadding="5" cellspacing="0" bgcolor="#FFFFFF" title="Data Set Description">
          <tr> 
            <td> <table  border=0 cellspacing=0 cellpadding=3 frame=BOX bgcolor="#FFFFFF">
                <thead>
                  <tr valign="top"> 
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Variable</b></font></td>
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Type</b></font></td>
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Length</b></font></td>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top"> 
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">LastName</font></td>
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Character</font></td>
                    <td align=center bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">20</font></td>
                  </tr>
                  <tr valign="top"> 
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">FirstName</font></td>
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Character</font></td>
                    <td align=center bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">15</font></td>
                  </tr>
                </tbody>
              </table></td>
          </tr>
        </table></td>
		<td>&nbsp;&nbsp;&nbsp;</td>
		<td valign="top"><center>
                <strong>Company.Demog</strong> 
              </center>
		<table border="1" align="center" cellpadding="5" cellspacing="0" bgcolor="#FFFFFF" title="Data Set Description">
          <tr> 
            <td> <table  border=0 cellspacing=0 cellpadding=3 frame=BOX bgcolor="#FFFFFF">
                <thead>
                  <tr valign="top"> 
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Variable</b></font></td>
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Type</b></font></td>
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Length</b></font></td>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top"> 
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">LastName</font></td>
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Character</font></td>
                    <td align=center bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">20</font></td>
                  </tr>
                  <tr valign="top"> 
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Address</font></td>
                    <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Character</font></td>
                    <td align=center bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">45</font></td>
                  </tr>
                  <tr valign="top">
                    <td align=LEFT bgcolor="#FFFFFF">Age</td>
                    <td align=LEFT bgcolor="#FFFFFF">Numeric</td>
                    <td align=center bgcolor="#FFFFFF">3</td>
                  </tr>
                </tbody>
              </table></td>
          </tr>
        </table></td></tr></table>
		<P><BR>
		Suppose that both <strong>Company.Roster</strong> and <strong>Company.Demog</strong> are sorted by <code>LastName</code>. 
		You could use a MERGE statement to combine these two data files into a view named <strong>Company.Roster_View</strong>, as shown below.
       <P> <br><font color="#003399">
<pre>     data company.roster_view/view=company.roster_view;
        merge company.roster company.demog;
        by lastname;
     run;</pre></font>
      
        <P><br>
          Now suppose <strong>Company.Roster</strong> changes so that <code>LastName</code> 
          is named <code>Surname</code>. Your data view must also be updated.</p>
        <table align="center">
          <tr>
            <td valign="top"><center>
                <strong>Company.Roster</strong> 
              </center>
              <table border="1" align="center" cellpadding="5" cellspacing="0" bgcolor="#FFFFFF" title="Data Set Description">
                <tr> 
                  <td> <table  border=0 cellspacing=0 cellpadding=3 frame=BOX bgcolor="#FFFFFF">
                      <thead>
                        <tr valign="top"> 
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Variable</b></font></td>
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Type</b></font></td>
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Length</b></font></td>
                        </tr>
                      </thead>
                      <tbody>
                        <tr valign="top"> 
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Surname</font></td>
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Character</font></td>
                          <td align=center bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">20</font></td>
                        </tr>
                        <tr valign="top">
                          <td align=LEFT bgcolor="#FFFFFF">FirstName</td>
                          <td align=LEFT bgcolor="#FFFFFF">Character</td>
                          <td align=center bgcolor="#FFFFFF">15</td>
                        </tr>
                      </tbody>
                    </table></td>
                </tr>
              </table></td>
            <td>&nbsp;&nbsp;&nbsp;</td>
            <td valign="top"><center>
                <strong>Company.Demog</strong> 
              </center>
              <table border="1" align="center" cellpadding="5" cellspacing="0" bgcolor="#FFFFFF" title="Data Set Description">
                <tr> 
                  <td> <table  border=0 cellspacing=0 cellpadding=3 frame=BOX bgcolor="#FFFFFF">
                      <thead>
                        <tr valign="top"> 
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Variable</b></font></td>
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Type</b></font></td>
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000"><b>Length</b></font></td>
                        </tr>
                      </thead>
                      <tbody>
                        <tr valign="top"> 
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">LastName</font></td>
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Character</font></td>
                          <td align=center bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">20</font></td>
                        </tr>
                        <tr valign="top"> 
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Address</font></td>
                          <td align=LEFT bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">Character</font></td>
                          <td align=center bgcolor="#FFFFFF"><font  face="Verdana, Arial, Helvetica" size="2" color="#000000">45</font></td>
                        </tr>
                        <tr valign="top"> 
                          <td align=LEFT bgcolor="#FFFFFF">Age</td>
                          <td align=LEFT bgcolor="#FFFFFF">Numeric</td>
                          <td align=center bgcolor="#FFFFFF">3</td>
                        </tr>
                      </tbody>
                    </table></td>
                </tr>
              </table></td>
          </tr>
        </table>
		 <font color="#003399">
        <pre>     data roster_view/view=roster_view;
        merge company.roster company.demog(rename=(LastName=Surname));
        by lastname;
     run;</pre>
        </font> If <strong>Company.Roster</strong> changed again so that <code>Surname</code> 
        and <code>FirstName</code> were combined into one variable called <code>FullName</code>, 
        the code for your data view would need additional changes. Although this 
        is a simple example, you can see that a data view that is based on unstable 
        data will require additional maintenance work.</td>
    </tr>
  </table>

  <p><br>

  
  <!-- InstanceEndEditable --> 
</center>
<script>writeNav_regular_bottom();</script>
</body>
<!-- InstanceEnd --></html>
