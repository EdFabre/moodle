<html><!-- InstanceBegin template="/Templates/opt_example.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="../tut.js"></SCRIPT>
<script language="JavaScript" src="../nav.js"></script>
<SCRIPT LANGUAGE="JavaScript">
 setPageTitle();
 setCookie();
 
// Drop down menu link- © Dynamic Drive (www.dynamicdrive.com)
// For full source code and 100's more DHTML scripts, visit http://www.dynamicdrive.com
// Credit MUST stay intact for use -->

</SCRIPT>

<!-- InstanceBeginEditable name="extrascript" -->
<SCRIPT language="JavaScript">
</SCRIPT>
<!-- InstanceEndEditable -->

<link rel="stylesheet" href="../tut.css">

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Example</title></head>

<body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" rightmargin="0" bgcolor="#FFFFF0">

<script>writeinformationObjectTopNav1();</script>
      
	  <font color="#003399" size="3" face="Arial, Helvetica, sans-serif"><strong><!-- InstanceBeginEditable name="TopicTitle" -->Executing 
      Only Necessary Statements<!-- InstanceEndEditable --></strong></font> 
      <!-- InstanceBeginEditable name="continued" --><font color="#003399" size="3" face="Arial, Helvetica, sans-serif">(continued)</font><!-- InstanceEndEditable -->
	  
<script>writeinformationObjectTopNav2();</script>

<img src="../navimages/cleardot.gif" width="411" height="1" alt=" "><br>
<p>
<!-- InstanceBeginEditable name="Example Title" -->
<table width="84%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <h2><img src="../navimages/opt_ex.gif" alt="Bar chart icon" width="32" height="32" align="absmiddle">Comparative 
        Example: Creating a Subset of Data</h2></td>
  </tr>
</table>
<!-- InstanceEndEditable --><!-- InstanceBeginEditable name="Introduction" --> 
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <p>Suppose you want to create a subset of data, calculate six new variables, 
        and conditionally output data by reading from the SAS data set <strong>Retail.Order_fact.</strong> 
        The data set should contain new variables for 
      <ul>
        <li>the month of the order</li>
        <li>the elapsed time between the order date and the delivery date</li>
        <li>the profit, based on the retail price, discount, and unit price</li>
        <li>total profit</li>
        <li>total discount</li>
        <li>total wait time.</li>
      </ul>
      <p>The subset of data that includes only orders for the month of December 
        is approximately 9.66% of the data. </p>
      <p>You can accomplish this task by using a subsetting IF statement. Placement 
        of this statement in the DATA step can affect the efficiency of the DATA 
        step in terms of CPU time and real time. Notice the comparison between 
        these two approaches: 
      <ol>
        <li><a href="#1">A Subsetting IF Statement at the Bottom</a></li>
        <li><a href="#2">A Subsetting IF Statement near the Top.</a></li>
      </ol>
      <p>The following sample programs show each of these techniques. You can 
        use these samples as models for creating benchmark programs in your own 
        environment. Your results may vary depending on the structure of your 
        data, your operating environment, and the resources that are available 
        at your site. You can also view <a href="#recommendations">general recommendations</a> 
        for executing only necessary statements. 
      <hr size="1" noshade></td>
  </tr>
</table>
<!-- InstanceEndEditable -->
<p> 
  
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
      <td> <h2><!-- InstanceBeginEditable name="Technique Title" --><a name="techniques"></a>Programming 
        Techniques<!-- InstanceEndEditable --></h2></td>
    </tr>
  </table>
<!-- InstanceBeginEditable name="Techniques" --> 
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="1"></a><img src="../navimages/opt_1.gif" alt="1." width="20" height="20" align="absmiddle"> 
        A Subsetting IF Statement at the Bottom</strong></p>
      <blockquote> 
        <p>This program calculates six new variables before the subsetting IF 
          statement selects only observations whose values for Month are <em>12</em>.</p>
      </blockquote>
      <blockquote> 
        <pre><font color="#003399">     data profit;
        retain TotalProfit TotalDiscount TotalWait Count 0;    
        set retail.order_fact;
        MonthOfOrder=month(order_date);
        WaitTime=sum(delivery_date,-order_date);
        if discount gt . then
           CalcProfit=sum((total_retail_price*discount),-costprice_per_unit)
                      *quantity;
        else CalcProfit=sum(total_retail_price,-costprice_per_unit)
                      *quantity;
        TotalProfit=sum(totalprofit,calcprofit);
        TotalDiscount=sum(totaldiscount,discount);
        TotalWait=sum(totalwait,waittime);
        Count+1;    
        <strong>if monthoforder=12;</strong>
     run;
</font></pre>
      </blockquote></td>
  </tr>
</table>
<p><br>
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="2" id="2"></a><img src="../navimages/opt_2.gif" alt="2." width="20" height="20" align="absmiddle"> 
        A Subsetting IF Statement near the Top</strong></p>
      <blockquote> 
        <p>In this program, the subsetting IF statement is positioned immediately 
          after the value for <code>MonthofOrder</code> has been calculated. If 
          the value is not <em>12</em>, then no further statements are processed 
          for that observation. In this program, calculations are performed on 
          a smaller number of observations, which results in greater program efficiency.</p>
      </blockquote>
      <p> 
      <blockquote> 
        <pre><font color="#003399">     data profit;
        retain TotalProfit TotalDiscount TotalWait Count 0;  
        set retail.order_fact;
        MonthOfOrder=month(order_date);
        <strong>if monthoforder=12;</strong>
        WaitTime=sum(delivery_date,-order_date);
        if discount gt . then
           CalcProfit=sum((total_retail_price*discount),-costprice_per_unit)
                      *quantity;
        else CalcProfit=sum(total_retail_price,-costprice_per_unit)
                      *quantity;
        TotalProfit=sum(totalprofit,calcprofit);
        TotalDiscount=sum(totaldiscount,discount);
        TotalWait=sum(totalwait,waittime);
        Count+1;
     run;
</font></pre>
      </blockquote></td>
  </tr>
</table>
<p><br>
<!-- InstanceEndEditable --> 
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr> 
      <td> <hr size="1" noshade> </td>
    </tr>
  </table>
<p>
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <h2><a name="recommendations"></a><script>document.write(generalRecommendationsTitle);</script></h2></td>
  </tr>
</table>
<!-- InstanceBeginEditable name="Recommendations" -->
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr> 
    <td><ul>
        <li>Position the subsetting IF statement in a DATA step as soon as logically 
          possible in order to save the most resources.</li>
      </ul></td>
  </tr>
</table>
<p>
<!-- InstanceEndEditable -->
<script>writeNav_regular_bottom();</script>
</body>
<!-- InstanceEnd --></html>
