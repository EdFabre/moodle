<html><!-- InstanceBegin template="/Templates/opt_example.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="../tut.js"></SCRIPT>
<script language="JavaScript" src="../nav.js"></script>
<SCRIPT LANGUAGE="JavaScript">
 setPageTitle();
 setCookie();
 
// Drop down menu link- © Dynamic Drive (www.dynamicdrive.com)
// For full source code and 100's more DHTML scripts, visit http://www.dynamicdrive.com
// Credit MUST stay intact for use -->

</SCRIPT>

<!-- InstanceBeginEditable name="extrascript" -->
<SCRIPT LANGUAGE="JavaScript">
</SCRIPT>
<!-- InstanceEndEditable -->

<link rel="stylesheet" href="../tut.css">

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Example</title></head>

<body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" rightmargin="0" bgcolor="#FFFFF0">

<script>writeinformationObjectTopNav1();</script>
      
	  <font color="#003399" size="3" face="Arial, Helvetica, sans-serif"><strong><!-- InstanceBeginEditable name="TopicTitle" -->Executing 
      Only Necessary Statements<!-- InstanceEndEditable --></strong></font> 
      <!-- InstanceBeginEditable name="continued" --><font color="#003399" size="3" face="Arial, Helvetica, sans-serif">(continued)</font><!-- InstanceEndEditable -->
	  
<script>writeinformationObjectTopNav2();</script>

<img src="../navimages/cleardot.gif" width="411" height="1" alt=" "><br>
<p>
<!-- InstanceBeginEditable name="Example Title" -->
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <h2><img src="../navimages/opt_ex.gif" alt="Bar chart icon" width="32" height="32" align="absmiddle">Comparative 
        Example: Creating Variables Conditionally When Calling Functions</h2></td>
  </tr>
</table>
<!-- InstanceEndEditable --><!-- InstanceBeginEditable name="Introduction" --> 
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <p> Suppose you want to create a report that includes a new variable 
        that is based on the value of an existing variable in the SAS data set 
        <strong>Retail.Order_fact</strong>. Values for the new <code>Month</code> 
        variable are extracted from the existing variable <code>Order_Date</code> 
        by using the MONTH function. 
      <p> The following table shows that the values for <code>Month</code> are 
        fairly evenly distributed. 
      <p><br>
      <table border="1px" align="center" cellpadding="2" cellspacing="1" bordercolor="#000000" frame="box" rules="groups" class="Table" summary="Procedure Freq: One-Way Frequencies" title="Frequency table">
        <colgroup>
<col>
</colgroup>
<colgroup>
<col>
<col>
</colgroup>
<thead>
          <tr bgcolor="#CCCCCC"> 
            <th colspan="3"><font color="#003399" size="3">Month of Order</font></th>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Month</font></th>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Frequency</font></th>
            <th bgcolor="#CCCCCC"> <font color="#003399" size="3">Percent</font></th>
</tr>
</thead>
<tbody>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Jan</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">386535</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">8.12</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Feb</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">319895</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">6.72</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Mar</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">350255</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">7.36</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Apr</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">421265</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">8.85</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">May</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">443535</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">9.32</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Jun</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">429760</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">9.03</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Jul</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">438085</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">9.21</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Aug</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">443075</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">9.31</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Sep</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">299260</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">6.29</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Oct</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">373400</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">7.85</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Nov</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">393750</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">8.27</font></td>
</tr>
<tr>
            <th bgcolor="#CCCCCC"><font color="#003399" size="3">Dec</font></th>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">459530</font></td>
            <td bgcolor="#EFEFEF"><font color="#000000" size="2">9.66</font></td>
</tr>
</tbody>
</table> 
      <p><br>
        Techniques for creating new variables conditionally include
<ol>
        <li><a href="#1">Parallel IF Statements</a></li>
        <li><a href="#2">ELSE IF Statements, Many Function References</a></li>
        <li><a href="#3">ELSE IF Statements, One Function Reference</a></li>
        <li><a href="#4">SELECT Group</a>.</li>
              </ol>
      <p>The following sample programs show each of these techniques. You can 
        use these samples as models for creating benchmark programs in your own 
        environment. Your results may vary depending on the structure of your 
        data, your operating environment, and the resources that are available 
        at your site. You can also view <a href="#recommendations">general recommendations</a> 
        for executing only necessary statements. 
      <hr size="1" noshade></td>
  </tr>
</table>
<!-- InstanceEndEditable -->
<p> 
  
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
      <td> <h2><!-- InstanceBeginEditable name="Technique Title" --><a name="techniques"></a>Programming 
        Techniques<!-- InstanceEndEditable --></h2></td>
    </tr>
  </table>
<!-- InstanceBeginEditable name="Techniques" --> 
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="1"></a><img src="../navimages/opt_1.gif" alt="1." width="20" height="20" align="absmiddle"> 
        Parallel IF Statements</strong></p>
      <blockquote>
        <p>This program calls the MONTH function 12 times. With these non-exclusive 
          cases, each IF statement executes for each observation that is read 
          from <strong>Retail.Order_Fact</strong>. This is the least efficient 
          approach.</p>
      </blockquote>
    
      <blockquote>
        <pre><font color="#003399">     data retail.orders;
        set retail.order_fact;
        <strong>if month(order_date)=1 then Month='Jan';
        if month(order_date)=2 then Month='Feb';
        if month(order_date)=3 then Month='Mar';
        if month(order_date)=6 then Month='Jun';
        if month(order_date)=7 then Month='Jul';
        if month(order_date)=8 then Month='Aug';
        if month(order_date)=9 then Month='Sep';
        if month(order_date)=10 then Month='Oct';
        if month(order_date)=11 then Month='Nov';
        if month(order_date)=12 then Month='Dec';</strong>
     run;</font></pre>
      </blockquote></td>
  </tr>
</table>
<p><br>
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="2" id="2"></a><img src="../navimages/opt_2.gif" alt="2." width="20" height="20" align="absmiddle"> 
        ELSE IF Statements, Many Function References</strong></p>
      <blockquote> 
        <p>This program uses ELSE IF statements that call the function MONTH. 
          Once the true condition is found, subsequent ELSE IF statements are 
          not executed. This is more efficient than using parallel IF statements, 
          but the MONTH function is executed many times.</p>
      </blockquote>
          <blockquote> 
        <pre><font color="#003399">     data retail.orders;
        set retail.order_fact;
        <strong>if month(order_date)=1 then Month='Jan';
        else if month(order_date)=2 then Month='Feb';
        else if month(order_date)=3 then Month='Mar';
        else if month(order_date)=4 then Month='Apr';
        else if month(order_date)=5 then Month='May';
        else if month(order_date)=6 then Month='Jun';
        else if month(order_date)=7 then Month='Jul';
        else if month(order_date)=10 then Month='Oct';
        else if month(order_date)=11 then Month='Nov';
        else if month(order_date)=12 then Month='Dec';</strong>
     run;</font></pre>
</blockquote></td>
  </tr>
</table>
<p><br>
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="3" id="3"></a><img src="../navimages/opt_3.gif" alt="2." width="20" height="20" align="absmiddle"> 
        ELSE IF Statements, One Function Reference</strong></p>
      <blockquote> 
        <p>This program uses the MONTH function to find the value of <code>Order_Date</code>, 
          but only once. The MONTH function is called immediately after reading 
          the data set and before any IF-THEN/ELSE statements execute. This is 
          efficient. </p>
      </blockquote>
         <blockquote> 
        <pre><font color="#003399">     data retail.orders(drop=mon);
        set retail.order_fact;
        mon=month(order_date);
        <strong>if mon=1 then Month='Jan';
        else if mon=2 then Month='Feb';
        else if mon=3 then Month='Mar';
        else if mon=4 then Month='Apr';
        else if mon=5 then Month='May';
        else if mon=6 then Month='Jun';
        else if mon=7 then Month='Jul';
        else if mon=8 then Month='Aug';
        else if mon=9 then Month='Sep';
        else if mon=10 then Month='Oct';
        else if mon=11 then Month='Nov';
        else if mon=12 then Month='Dec';</strong>
     run;</font></pre>
      </blockquote></td>
  </tr>
</table>
<p><br>
<table width="85%" border="1" align="center" cellpadding="10" cellspacing="0" bgcolor="#FFFFFF">
  <tr> 
    <td bgcolor="#F7F7DE"> <p><strong><a name="4" id="4"></a><img src="../navimages/opt_4.gif" alt="4." width="20" height="20" align="absmiddle"> 
        SELECT Group</strong></p>
      <blockquote> 
        <p>In this program, the SELECT statement calls the MONTH function only 
          once, before WHEN statements execute and assign values for <code>Month</code>. 
          This is efficient.</p>
      </blockquote>
         <blockquote> 
        <pre><font color="#003399">     data retail.orders;
        set retail.order_fact;
        <strong>select(month(order_date));
           when (1) Month='Jan';
           when (2) Month='Feb';
           when (3) Month='Mar';
           when (4) Month='Apr';
           when (5) Month='May';
           when (6) Month='Jun';
           when (7) Month='Jul';
           when (8) Month='Aug';
           when (11) Month='Nov';
           when (12) Month='Dec';
           otherwise;
        end;</strong>
     run;</font></pre>
      </blockquote></td>
  </tr>
</table>
<p><br>

<!-- InstanceEndEditable --> 
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr> 
      <td> <hr size="1" noshade> </td>
    </tr>
  </table>
<p>
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td> <h2><a name="recommendations"></a><script>document.write(generalRecommendationsTitle);</script></h2></td>
  </tr>
</table>
<!-- InstanceBeginEditable name="Recommendations" -->
<table width="85%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr> 
    <td> <ul>
        <li>Avoid using parallel IF statements, which use the most resources
          and are the least efficient way to conditionally execute statements.
        </li><br><br>
        <li>Use IF-THEN/ELSE statements and SELECT blocks to be more efficient. 
        </li><br><br>
        <li>To significantly reduce the amount of resources used, write programs 
          that call a function only once instead of repetitively using the same 
          function in many statements. SAS functions are convenient, but they 
          can be expensive in terms of CPU resources.<br>
</li>
    </ul></td>
  </tr>
</table>
<!-- InstanceEndEditable -->
<script>writeNav_regular_bottom();</script>
</body>
<!-- InstanceEnd --></html>
