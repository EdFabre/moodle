<html><!-- InstanceBegin template="/Templates/informationObject.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="../tut.js"></SCRIPT>
<script language="JavaScript" src="../nav.js"></script>
<SCRIPT LANGUAGE="JavaScript">
 setPageTitle();
 setCookie();
  
// Drop down menu link- © Dynamic Drive (www.dynamicdrive.com)
// For full source code and 100's more DHTML scripts, visit http://www.dynamicdrive.com
// Credit MUST stay intact for use -->

</SCRIPT>

<!-- InstanceBeginEditable name="extrascript" --> 
<SCRIPT LANGUAGE="JavaScript">
</SCRIPT>
<!-- InstanceEndEditable -->

<link rel="stylesheet" href="../tut.css">


<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
</HEAD>

<body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" rightmargin="0" bgcolor="#FFFFF0">
<script>writeinformationObjectTopNav1();</script>
	  
	  <font color="#003399" size="3" face="Arial, Helvetica, sans-serif"><strong><!-- InstanceBeginEditable name="TopicTitle" -->Creating 
      Macro Variables During DATA Step Execution<!-- InstanceEndEditable --></strong></font> <!-- InstanceBeginEditable name="continued" --><font color="#003399" size="3" face="Arial, Helvetica, sans-serif">(continued)</font><!-- InstanceEndEditable -->
	  
<script>writeinformationObjectTopNav2();</script>
<br>
<center>
  <!-- InstanceBeginEditable name="content" --> 
<table width="85%" border="0" cellpadding="0" cellspacing="0" align="center">
  <tr valign="top"> 
    <td>
<p>Another enhancement that you can make to your program is to specify <strong>when</strong> 
        the CALL SYMPUT routine executes. In the program shown below, the CALL 
        SYMPUT routine executes during each iteration of the DATA step.</p>
    </td>
  </tr>
</table>
<p align="center"> 
<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td> 
        <pre><font color="#003399">     data hrd.overtime;</font>
<font color="#003399">        set hrd.temp(keep=name overtime);</font>
<font color="#003399">        if overtime ne .;</font>
<font color="#003399">        TotalOvertime+overtime;</font>
       <font color="#003399"> <strong>call symput('total',put(totalovertime,2.));</strong></font>
<font color="#003399"><strong>    </strong> run;</font>
<font color="#003399">     title "Temporary Employees Worked &amp;total Overtime Hours";</font>
<font color="#003399">     proc print data=hrd.overtime;</font>
<font color="#003399">     run;</font>
</pre>
      </td>
    </tr>
  </table>
</center>

<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td>During each DATA step iteration, the CALL SYMPUT routine assigns the 
        current value of <code>TotalOvertime</code> to the macro variable <code>total</code>. 
        The routine updates <code>total</code> continually until the final iteration 
        assigns a final value. This final value appears in your TITLE statement.</td>
    </tr>
  </table>
</center>
<p align="center"> <br>
<center>
  <table border=0 width=85% cellpadding=1 cellspacing=1 rules=NONE frame=VOID>
    <tr> 
      <td align=CENTER><font face="Arial, Helvetica, Helv" size="4" color="#002288"><b><i><nobr>Temporary 
        Employees Worked </nobr></i></b></font><font face="Arial, Helvetica, Helv" size="4" color="Red"
	    ><b><i>48 </i></b></font><font face="Arial, Helvetica, Helv" size="4" color="#002288"><b><i>Overtime 
        Hours</i></b></font></td>
    </tr>
  </table>
</center>
<P>
<center>
  <table border=1 cellpadding=2 cellspacing=1 rules=GROUPS frame=BOX bgcolor="#FFFFF0"
  bordercolor="#000000" title="PROC PRINT output">
    <thead> 
    <tr> 
      <td align=CENTER bgcolor="#CCCCCC" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="3" color="#0033AA"><b>Obs</b></font></td>
      <td align=LEFT bgcolor="#CCCCCC" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="3" color="#0033AA"><b>Name</b></font></td>
      <td align=LEFT bgcolor="#CCCCCC" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="3" color="#0033AA"><b>Overtime</b></font></td>
      <td align=LEFT bgcolor="#CCCCCC" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="3" color="#0033AA"><b>TotalOvertime</b></font></td>
    </tr>
    </thead> <tbody> 
    <tr> 
      <td align=RIGHT bgcolor="#CCCCCC" bordercolor="#000000"><b><font face="Arial, Helvetica, Helv" size="3" color="#003399"> 
        1</font></b></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="2" color="#000000">Cichock, Elizabeth Marie </font></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">4</font> 
      </td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">4</font> 
      </td>
    </tr>
    <tr> 
      <td align=RIGHT bgcolor="#CCCCCC" bordercolor="#000000"><b><font face="Arial, Helvetica, Helv" size="3" color="#003399"> 
        2</font></b></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="2" color="#000000">Bates, Ellen Marie </font></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">2</font> 
      </td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">6</font> 
      </td>
    </tr>
    <tr> 
      <td align=RIGHT bgcolor="#CCCCCC" bordercolor="#000000"><b><font face="Arial, Helvetica, Helv" size="3" color="#003399"> 
        3</font></b></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="2" color="#000000"><nobr>Abramson, Andrea Carlson</nobr></font></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">10</font> 
      </td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">16</font> 
      </td>
    </tr>
    <tr> 
      <td align=RIGHT bgcolor="#CCCCCC" bordercolor="#000000"><b><font face="Arial, Helvetica, Helv" size="3" color="#003399"> 
        4</font></b></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="2" color="#000000">Wallace, Julie Dee</font></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">5</font> 
      </td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">21</font> 
      </td>
    </tr>
    <tr> 
      <td align=RIGHT bgcolor="#CCCCCC" bordercolor="#000000"><b><font face="Arial, Helvetica, Helv" size="3" color="#003399"> 
        5</font></b></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="2" color="#000000">Rusnak, Mona Ann</font></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">8</font> 
      </td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">29</font> 
      </td>
    </tr>
    <tr> 
      <td align=RIGHT bgcolor="#CCCCCC" bordercolor="#000000"><b><font face="Arial, Helvetica, Helv" size="3" color="#003399"> 
        6</font></b></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="2" color="#000000">Bills, Paulette Ann </font></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">4</font> 
      </td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">33</font> 
      </td>
    </tr>
    <tr> 
      <td align=RIGHT bgcolor="#CCCCCC" bordercolor="#000000"><b><font face="Arial, Helvetica, Helv" size="3" color="#003399"> 
        7</font></b></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="2" color="#000000">Wingo, Jennifer Marie </font></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">7</font> 
      </td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">40</font> 
      </td>
    </tr>
    <tr> 
      <td align=RIGHT bgcolor="#CCCCCC" bordercolor="#000000"><b><font face="Arial, Helvetica, Helv" size="3" color="#003399"> 
        8</font></b></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"><font face="Arial, Helvetica, Helv"
	      size="2" color="#000000">Smith, Jack Kenneth </font></td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">8</font> 
      </td>
      <td align=LEFT bgcolor="#EFEFEF" bordercolor="#000000"> 
        <p align=Right> <font face="Arial, Helvetica, Helv" size="2" color="#000000">48</font> 
      </td>
    </tr>
    </tbody> 
  </table>
</center>
<p align="center"> <br>
<center>
  <table cellpadding=0 cellspacing=0 border=0 width="85%">
    <tr> 
      <td>Because the total number of overtime hours for all employees is calculated 
        during the final iteration of the DATA step, the CALL SYMPUT routine actually 
        needs to execute only during this final iteration. 
        <p> <br>
          <strong>Controlling Execution</strong> 
        <p> You can control the execution of the CALL SYMPUT routine by using 
          the <strong>END=</strong> option in the SET statement and placing the 
          CALL SYMPUT routine in an <strong>IF-THEN</strong> statement. 
        <p> Let's begin with the END= option. You can specify the END= option 
          in the SET statement to create a temporary variable that contains an 
          end-of-file indicator. This variable is initialized to <em>0</em> before 
          the first iteration of the DATA step and is set to <em>1</em> when the 
          SET statement reads the last observation in the data set. 
        <p>Remember that the variable that the END= option creates is a temporary 
          variable. It is not stored in the new data set. 
        <p> In the following program, the END= option creates the temporary variable 
          <code>last</code>. The CALL SYMPUT routine is in an IF-THEN statement, 
          so the routine executes only when the last observation is read. 
      </td>
    </tr>
  </table>
</center>
<p align="center"> 
<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td> 
        <pre><font color="#003399">     data hrd.overtime;</font>
<font color="#003399">        set hrd.temp(keep=name overtime) <strong>end=last</strong>;</font>
<font color="#003399">        if overtime ne .;</font>
<font color="#003399">        TotalOvertime+overtime;</font>
<font color="#003399">        <b>if last=1 then call</b></font>
<b><font color="#003399">        symput('total',put(totalovertime,2.));</font></b>
<font color="#003399">     run;</font>
<font color="#003399">     title "Temporary Employees Worked &amp;total Overtime Hours";</font>
<font color="#003399">     proc print data=hrd.overtime;</font>
<font color="#003399">     run;</font>
</pre>
      </td>
    </tr>
  </table>
</center>

<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td>Note that the IF-THEN statement specifies that, if the value of <code>last</code> 
        is equal to <em>1</em>, indicating that the last observation has been 
        read, then the CALL SYMPUT routine will execute. This statement can also 
        be written as follows:</td>
    </tr>
  </table>
</center>
<p align="center"> 
<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td> 
        <pre><font color="#003399">     if <strong>last</strong> then call</font>
<font color="#003399">        symput('total',put(totalovertime,2.));</font>
</pre>
      </td>
    </tr>
  </table>
</center>

<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td>If the variable <code>last</code> does not have a specified value, the 
        default is <em>1</em>.</td>
    </tr>
  </table>
  <br>
  <br>
</center>
<!-- InstanceEndEditable --> 
</center>
<script>writeNav_regular_bottom();</script>
</body>
<!-- InstanceEnd --></html>
