<html><!-- InstanceBegin template="/Templates/informationObject.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="../tut.js"></SCRIPT>
<script language="JavaScript" src="../nav.js"></script>
<SCRIPT LANGUAGE="JavaScript">
 setPageTitle();
 setCookie();
  
// Drop down menu link- © Dynamic Drive (www.dynamicdrive.com)
// For full source code and 100's more DHTML scripts, visit http://www.dynamicdrive.com
// Credit MUST stay intact for use -->

</SCRIPT>

<!-- InstanceBeginEditable name="extrascript" --> 
<SCRIPT LANGUAGE="JavaScript">
</SCRIPT>
<!-- InstanceEndEditable -->

<link rel="stylesheet" href="../tut.css">


<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
</HEAD>

<body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" rightmargin="0" bgcolor="#FFFFF0">
<script>writeinformationObjectTopNav1();</script>
	  
	  <font color="#003399" size="3" face="Arial, Helvetica, sans-serif"><strong><!-- InstanceBeginEditable name="TopicTitle" -->Creating 
      One Observation per Header Record<!-- InstanceEndEditable --></strong></font> <!-- InstanceBeginEditable name="continued" --><font color="#003399" size="3" face="Arial, Helvetica, sans-serif">(continued)</font><!-- InstanceEndEditable -->
	  
<script>writeinformationObjectTopNav2();</script>
<br>
<center>
  <!-- InstanceBeginEditable name="content" --> 
<table width="85%" border="0" cellpadding="0" cellspacing="0" align="center">
  <tr valign="top"> 
    <td>
<p><strong>Determining the End of the External File</strong> </p>
      <p> Your program writes an observation to the data set only when another 
        header record is read and the DATA step has executed more than once. But 
        after the last detail record is read, there are no more header records 
        to cause the last observation to be written to the data set.
    </td>
  </tr>
</table>
<p align="center"> <br>
<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td valign="top"> 
        <pre>

<font color="#003399">     data perm.residnts;</font>
<font color="#003399">        infile census;</font>
<font color="#003399">        retain Address;</font>
<font color="#003399">        input type $1. @;</font>
<font color="#003399">        if type='H' then do;</font>
<font color="#003399">           if _n_ &gt; 1 then 
              output;</font>
<font color="#003399">           Total=0;</font>
<font color="#003399">           input address $ 3-17;</font>
<font color="#003399">        end;</font>
<font color="#003399">        else if type='P'
             then total+1;</font>
</pre>
      </td>
      <td>&nbsp;&nbsp;&nbsp;</td>
      <td> <font  face="Courier New, Courier" size="2" color="#000000"> 
        <table  border=1 cellspacing=0 cellpadding=0 rules=NONE frame=BOX bgcolor="#CCCCCC" title="Raw Data File">
          <thead>
          <tr> 
            <td align=CENTER bgcolor="#F7F7DE"><font  face="Courier New, Courier" size="2" color="#000000">1---+----10---+----20</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">H&nbsp;321&nbsp;S.&nbsp;MAIN&nbsp;ST&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;MARY&nbsp;E&nbsp;&nbsp;&nbsp;&nbsp;21&nbsp;F</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;WILLIAM&nbsp;M&nbsp;23&nbsp;M&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;SUSAN&nbsp;K&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;F</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">H&nbsp;324&nbsp;S.&nbsp;MAIN&nbsp;ST&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;THOMAS&nbsp;H&nbsp;&nbsp;79&nbsp;M</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;WALTER&nbsp;S&nbsp;&nbsp;46&nbsp;M</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;ALICE&nbsp;A&nbsp;&nbsp;&nbsp;42&nbsp;F&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;MARYANN&nbsp;A&nbsp;20&nbsp;F&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;JOHN&nbsp;S&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;M&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">H&nbsp;325A&nbsp;S.&nbsp;MAIN&nbsp;ST</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;JAMES&nbsp;L&nbsp;34&nbsp;M&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;LIZA&nbsp;A&nbsp;31&nbsp;F&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">H&nbsp;325B&nbsp;S.&nbsp;MAIN&nbsp;ST</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;MARGO&nbsp;K&nbsp;27&nbsp;F&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;WILLIAM&nbsp;R&nbsp;27&nbsp;M&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000"><span style="background-color: #CCCC99">P&nbsp;ROBERT&nbsp;W&nbsp;1&nbsp;M&nbsp;</span></font></td>
          </tr>
        </table>
        </font></td>
    </tr>
  </table>
</center>
<p align="center"> <br>
<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td>You need to determine when the last record in the file is read so that 
        you can then execute another explicit OUTPUT statement. You can determine 
        when the current record is the last record in an external file by specifying 
        the END= option in the INFILE statement. (You learned how to use the END= 
        option with a SET statement if you completed the lesson 
        <!--lesson reference-->
        <strong><script>document.write(m14title);</script></strong>.)</td>
    </tr>
  </table>
</center>
<p align="center"> <br>
<center>
  <table border="1" cellspacing="0" cellpadding="10" width="85%" bgcolor="#F7F7DE" title="General form, INFILE statement with the END= option">
    <tr> 
      <td><strong>General form, INFILE statement with the END= option:</strong> 
        <blockquote> <nobr><font color="#003399"><strong>INFILE </strong><em>file-specification</em><strong> 
          END=</strong><em>variable</em><strong>;</strong></font></nobr> </blockquote>
        <p> where <font color="#003399"><em>variable</em></font> is a temporary 
          numeric variable whose value is <em>0</em> until the last line is read 
          and <em>1</em> after the last line is read. 
        <p> Like automatic variables, the END= variable is not written to the 
          data set.
      </td>
    </tr>
  </table>
</center>
<p align="center"> <br>
<center>
  <table cellpadding="0" cellspacing="0" border="0" width="85%">
    <tr> 
      <td>In the following example, the END= variable is defined in the INFILE 
        statement as <code>last</code>. When <code>last</code> has a value other 
        than <em>0</em>, the OUTPUT statement writes the last observation to the 
        data set. 
        <pre><font color="#003399">     data perm.residnts;</font>
<font color="#003399">        <strong>infile census end=last;</strong></font>
<font color="#003399">        retain Address;</font>
<font color="#003399">        input type $1. @;</font>
<font color="#003399">        if type='H' then do;</font>
<font color="#003399">           if _n_ &gt; 1 then output;</font>
<font color="#003399">           Total=0;</font>
<font color="#003399">           input address $ 3-17;</font>
<font color="#003399">        end;</font>
<font color="#003399">        else if type='P' then total+1;</font>
<font color="#003399"><strong>        if last then output;</strong></font>
</pre>
        <p> A DROP= option in the DATA statement drops the variable <code>type</code> 
          from the data set, and a RUN statement completes the DATA step. 
        <pre><font color="#003399">     data perm.residnts <strong>(drop=type)</strong>;</font>
<font color="#003399">        infile census end=last;</font>
<font color="#003399">        retain Address;</font>
<font color="#003399">        input type $1. @;</font>
<font color="#003399">        if type='H' then do;</font>
<font color="#003399">           if _n_ &gt; 1 then output;</font>
<font color="#003399">           Total=0;</font>
<font color="#003399">           input address $ 3-17;</font>
<font color="#003399">        end;</font>
<font color="#003399">        else if type='P' then total+1;</font>
<font color="#003399"><strong>        </strong>if last then output;<strong></strong></font>
<font color="#003399"><strong>     run;</strong></font>
</pre>
      </td>
    </tr>
  </table>
</center>
<!-- InstanceEndEditable --> 
</center>
<script>writeNav_regular_bottom();</script>
</body>
<!-- InstanceEnd --></html>
